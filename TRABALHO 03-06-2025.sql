CREATE DATABASE FICHA_MEDICA2;
USE FICHA_MEDICA2;

CREATE TABLE ENDERECO(
	ID INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    CEP varchar(9) NOT NULL,
    TIPO_LOG VARCHAR(10) NOT NULL,
    LOGRADOURO VARCHAR(100) NOT NULL,
    NUMERO VARCHAR(20) NOT NULL,
    BAIRRO VARCHAR(30) NOT NULL,
	CIDADE VARCHAR(50) NOT NULL,
    UF VARCHAR(2) NOT NULL
);

CREATE TABLE PACIENTE (
	ID INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    NOME VARCHAR(100) NOT NULL,
    DATA_NASCIMENTO DATE NOT NULL,
    SEXO VARCHAR(10) NOT NULL,
    TELEFONE VARCHAR(16) NOT NULL,
    RG VARCHAR(11) NOT NULL,
    ESTADO_CIVIL VARCHAR(10) NOT NULL,
    ID_ENDERECO INT NOT NULL,
    FOREIGN KEY (ID_ENDERECO) REFERENCES ENDERECO(ID)
);

CREATE TABLE MEDICO (
	ID INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
	NOME VARCHAR(100) NOT NULL,
	RG VARCHAR(11) NOT NULL,
    CRM VARCHAR(11) NOT NULL,
    ESPECIALIZACAO VARCHAR(50) NOT NULL
);

CREATE TABLE EXAME(
	ID INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
	TIPO_EXAME VARCHAR(50) NOT NULL,
    DATA_EXAME DATE NOT NULL,
    RESULTADO_EXAME VARCHAR(250) NOT NULL
);

  CREATE TABLE CONSULTA (
	ID INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    ID_PACIENTE INT NOT NULL,
    ID_MEDICO INT NOT NULL,
    DATA_CONSULTA DATE NOT NULL,
    DIAGNOSTICO VARCHAR(255) NOT NULL,
    FOREIGN KEY (ID_PACIENTE) REFERENCES PACIENTE(ID),
	FOREIGN KEY (ID_MEDICO) REFERENCES MEDICO(ID)
);

CREATE TABLE CONSULTA_EXAME (
	ID_CONSULTA INT NOT NULL,
	ID_EXAME INT NOT NULL,
	PRIMARY KEY (ID_CONSULTA, ID_EXAME),
	FOREIGN KEY (ID_CONSULTA) REFERENCES CONSULTA(ID),
	FOREIGN KEY (ID_EXAME) REFERENCES EXAME(ID)
);


INSERT INTO ENDERECO (CEP, TIPO_LOG, LOGRADOURO, NUMERO, BAIRRO, CIDADE, UF) VALUES
('89560-112', 'Rua', 'Santa Catarina', '112', 'Centro', 'Videira', 'SC'),
('89560-410', 'Rua', 'Padres Salvatorianos', '410', 'Floresta', 'Videira', 'SC'),
('89560-276', 'Rua', 'Alvise Caldart', '276', 'Matriz', 'Videira', 'SC'),
('89564-410', 'Rua', '05 de Dezembro', '410', 'Vila Verde', 'Videira', 'SC'),
('89560-296', 'Rua', 'Abraão Brandalise', '296', 'Santa Tereza', 'Videira', 'SC');

INSERT INTO PACIENTE (NOME, DATA_NASCIMENTO, SEXO, TELEFONE, RG, ESTADO_CIVIL, ID_ENDERECO) VALUES
('João Silva', '1985-03-15', 'Masculino', '(49)99999-1234', '123456789', 'Solteiro', 1),
('Maria Oliveira', '1990-07-22', 'Feminino', '(49) 98888-5678', '987654321', 'Casada', 2),
('Carlos Souza', '1978-11-30', 'Masculino', '(49) 97777-9101', '112233445', 'Divorciado', 3),
('Ana Costa', '1983-02-05', 'Feminino', '(49) 96666-1122', '556677889', 'Viúva', 4),
('Luís Pereira', '1995-09-18', 'Masculino', '(49) 95555-2233', '998877665', 'Solteiro', 5);

INSERT INTO MEDICO (NOME, RG, CRM, ESPECIALIZACAO) VALUES
('Dr. Roberto Almeida', '123456789', '12345', 'Cardiologia'),
('Dra. Fernanda Lima', '987654321', '67890', 'Pediatria'),
('Dr. Marcos Silva', '112233445', '11223', 'Ortopedia'),
('Dra. Juliana Costa', '998877665', '33445', 'Ginecologia'),
('Dr. Eduardo Pereira', '556677889', '55678', 'Dermatologia');

INSERT INTO EXAME (TIPO_EXAME, DATA_EXAME, RESULTADO_EXAME) VALUES
('Hemograma', '2025-06-01', 'Normal'),
('Raio-X', '2025-06-02', 'Fratura detectada'),
('Ultrassom', '2025-06-03', 'Sem alterações'),
('Eletrocardiograma', '2025-06-04', 'Arritmia leve'),
('Tomografia', '2025-06-05', 'Sem lesões');

INSERT INTO CONSULTA (ID_PACIENTE, ID_MEDICO, DATA_CONSULTA, DIAGNOSTICO) VALUES
(1, 1, '2025-06-01', 'Hipertensão leve'),
(2, 2, '2025-06-02', 'Infecção viral'),
(3, 3, '2025-06-03', 'Fratura no fêmur'),
(4, 4, '2025-06-04', 'Exame preventivo'),
(5, 5, '2025-06-05', 'Dermatite alérgica');

INSERT INTO CONSULTA_EXAME (ID_CONSULTA, ID_EXAME) VALUES
(1, 1),
(2, 2),
(3, 3),
(4, 4),
(5, 5);


